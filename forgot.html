---
---
<!DOCTYPE html>
<html lang="en">
<head>
    {% include meta.html %}

    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <title>Brains@Play | Forgot Password</title>
</head>
<body>
<!--Navbar-->
{% include nav.html %}

<!--Main Content-->
<section>
    <div class="fullscreen form-container">
        <div id="reset-context" class="form-context">
            <h3>Forgot Password</h3>
            <p id="reset-message" class="small2x"></p>
            <div class='flex'>
                <form id="reset-form"  class="form" action="">
                    <div class="login-element">
                        <input type="email" name="email" autocomplete="off" placeholder="Email"/>
                    </div>
                </form>
            </div>
            <div class="login-buttons">
                <button id="reset-button">Reset Password</button>
            </div>
        </div>
    </div>
</section>
</body>
<script type="module">
    import {accounts} from '../js/accounts.mjs'

    let resetButton = document.getElementById('reset-button')
    let resetForm = document.getElementById('reset-form')
    let resetContext = document.getElementById('reset-context')
    let resetMessage = document.getElementById('reset-message')

    resetButton.onclick = () => {
        let emailInput = resetForm.querySelector('[name = "email"]')
        if (emailInput.value) {
            accounts.resetPassword({email: emailInput.value}).then(res => {
                console.log('eee', res)
                if (!res?.error) resetContext.innerHTML = `<h4>Email sent!</h4>`
                else resetMessage.innerHTML = res.error
            })
        }
    }
</script>
</html>
